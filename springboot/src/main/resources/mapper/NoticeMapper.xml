<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mapper.NoticeMapper">

    <sql id="Base_Column_List">
        announcement_id,announcement_title,announcement_text,announcement_time,announcer_id
    </sql>

    <select id="selectAll" resultType="com.example.entity.Notice">
        select
        <include refid="Base_Column_List" />, u.real_name
        from notice n
        left join user u on u.user_id = n.announcer_id
        <where>
            <if test="announcementId != null"> and announcement_id= #{announcementId}</if>
            <if test="announcementTitle != null"> and announcement_title like concat('%', #{announcementTitle}, '%')</if>
            <if test="announcementText != null"> and announcement_text= #{announcementText}</if>
            <if test="announcementTime != null"> and announcement_time= #{announcementTime}</if>
        </where>
        order by announcement_id asc
    </select>

</mapper>