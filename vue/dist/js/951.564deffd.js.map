{"version":3,"file":"js/951.564deffd.js","mappings":"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","sources":["webpack://vue/./src/views/Login.vue","webpack://vue/src/views/Login.vue","webpack://vue/./src/views/Login.vue?d7b7","webpack://vue/./src/views/Login.vue?9f01"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('div',{staticStyle:{\"width\":\"400px\",\"padding\":\"30px\",\"background-color\":\"white\",\"border-radius\":\"5px\",\"opacity\":\"0.9\"}},[_c('div',{staticStyle:{\"text-align\":\"center\",\"font-size\":\"20px\",\"margin-bottom\":\"10px\",\"color\":\"#333\"}},[_vm._v(\"光华教材征订系统\")]),_c('el-tabs',{model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"账号密码登录\",\"name\":\"username\"}},[_c('el-form',{ref:\"usernameformRef\",attrs:{\"model\":_vm.usernameForm,\"rules\":_vm.usernameRules}},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-user\",\"placeholder\":\"请输入账号\"},model:{value:(_vm.usernameForm.username),callback:function ($$v) {_vm.$set(_vm.usernameForm, \"username\", $$v)},expression:\"usernameForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-lock\",\"placeholder\":\"请输入密码\",\"show-password\":\"\"},model:{value:(_vm.usernameForm.password),callback:function ($$v) {_vm.$set(_vm.usernameForm, \"password\", $$v)},expression:\"usernameForm.password\"}})],1),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"100%\",\"background-color\":\"#333\",\"border-color\":\"#333\",\"color\":\"white\"},on:{\"click\":_vm.login}},[_vm._v(\"登 录\")])],1),_c('div',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\"}},[_c('div',{staticStyle:{\"flex\":\"1\"}}),_c('div',{staticStyle:{\"flex\":\"1\",\"text-align\":\"right\"}},[_vm._v(\" 还没有账号？请 \"),_c('a',{attrs:{\"href\":\"/register\"}},[_vm._v(\"注册\")])])])],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"邮箱登录\",\"name\":\"email\"}},[_c('el-form',{ref:\"emailformRef\",attrs:{\"model\":_vm.emailForm,\"rules\":_vm.emailRules}},[_c('el-form-item',{attrs:{\"prop\":\"email\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-message\",\"placeholder\":\"请输入邮箱\"},model:{value:(_vm.emailForm.email),callback:function ($$v) {_vm.$set(_vm.emailForm, \"email\", $$v)},expression:\"emailForm.email\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"code\"}},[_c('el-input',{staticStyle:{\"width\":\"190px\"},attrs:{\"prefix-icon\":\"el-icon-lock\",\"placeholder\":\"请输入验证码\",\"show-password\":\"\"},model:{value:(_vm.emailForm.code),callback:function ($$v) {_vm.$set(_vm.emailForm, \"code\", $$v)},expression:\"emailForm.code\"}}),_c('el-button',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.sendEmailCode()}}},[_vm._v(\"获取验证码\")])],1),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"100%\",\"background-color\":\"#333\",\"border-color\":\"#333\",\"color\":\"white\"},on:{\"click\":_vm.login}},[_vm._v(\"登 录\")])],1),_c('div',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\"}},[_c('div',{staticStyle:{\"flex\":\"1\"}}),_c('div',{staticStyle:{\"flex\":\"1\",\"text-align\":\"right\"}},[_vm._v(\" 还没有账号？请 \"),_c('a',{attrs:{\"href\":\"/register\"}},[_vm._v(\"注册\")])])])],1)],1)],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <div style=\"width: 400px; padding: 30px; background-color: white; border-radius: 5px; opacity:0.9;\">\r\n      <div style=\"text-align: center; font-size: 20px; margin-bottom: 10px; color: #333;\">光华教材征订系统</div>\r\n\r\n      <el-tabs v-model=\"activeName\">\r\n        <el-tab-pane label=\"账号密码登录\" name=\"username\">\r\n          <el-form :model=\"usernameForm\" :rules=\"usernameRules\" ref=\"usernameformRef\">\r\n            <el-form-item prop=\"username\">\r\n              <el-input prefix-icon=\"el-icon-user\" placeholder=\"请输入账号\" v-model=\"usernameForm.username\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"password\">\r\n              <el-input prefix-icon=\"el-icon-lock\" placeholder=\"请输入密码\" show-password  v-model=\"usernameForm.password\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button style=\"width: 100%; background-color: #333; border-color: #333; color: white\" @click=\"login\">登 录</el-button>\r\n            </el-form-item>\r\n            <div style=\"display: flex; align-items: center\">\r\n              <div style=\"flex: 1\"></div>\r\n              <div style=\"flex: 1; text-align: right\">\r\n                还没有账号？请 <a href=\"/register\">注册</a>\r\n              </div>\r\n            </div>\r\n          </el-form>\r\n        </el-tab-pane>\r\n\r\n        <el-tab-pane label=\"邮箱登录\" name=\"email\">\r\n          <el-form :model=\"emailForm\" :rules=\"emailRules\" ref=\"emailformRef\">\r\n            <el-form-item prop=\"email\">\r\n              <el-input prefix-icon=\"el-icon-message\" placeholder=\"请输入邮箱\" v-model=\"emailForm.email\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"code\">\r\n              <el-input style=\"width: 190px;\" prefix-icon=\"el-icon-lock\" placeholder=\"请输入验证码\" show-password  v-model=\"emailForm.code\"></el-input>\r\n              <el-button style=\"margin-left: 20px;\" type=\"primary\" size=\"small\"  @click=\"sendEmailCode()\">获取验证码</el-button>\r\n            </el-form-item>\r\n            <el-form-item>\r\n              <el-button style=\"width: 100%; background-color: #333; border-color: #333; color: white\" @click=\"login\">登 录</el-button>\r\n            </el-form-item>\r\n            <div style=\"display: flex; align-items: center\">\r\n              <div style=\"flex: 1\"></div>\r\n              <div style=\"flex: 1; text-align: right\">\r\n                还没有账号？请 <a href=\"/register\">注册</a>\r\n              </div>\r\n            </div>\r\n          </el-form>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n      activeName: 'username',\r\n      usernameForm: {},\r\n      emailForm: {},\r\n      usernameRules: {\r\n        username: [\r\n          { required: true, message: '请输入账号', trigger: 'blur' },\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' },\r\n        ]\r\n      },\r\n      emailRules: {\r\n        email: [\r\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n          { pattern: /^\\w+((.\\w+)|(-\\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/, message: '邮箱格式不正确', trigger: 'blur' }\r\n        ],\r\n        code: [\r\n          { required: true, message: '请输入验证码', trigger: 'blur' },\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n\r\n  },\r\n  methods: {\r\n    login() { // 动态登录 邮箱 或者用户名\r\n      let form = '';\r\n      let userForm = {};\r\n      let URL = '';\r\n      if (this.activeName === 'username'){\r\n        form = 'usernameformRef'\r\n        userForm = this.usernameForm\r\n        URL = '/login'\r\n      }else if (this.activeName === 'email'){\r\n        form = 'emailformRef'\r\n        userForm = this.emailForm\r\n        URL = '/loginEmail'\r\n      }\r\n      this.$refs[form].validate((valid) => {\r\n        if (valid) {\r\n          // 验证通过\r\n          this.$request.post(URL,userForm ).then(res => {\r\n            if (res.code === '200') {\r\n              localStorage.setItem(\"xm-user\", JSON.stringify(res.data))  // 存储用户数据\r\n              this.$router.push('/')  // 跳转主页\r\n              this.$message.success('登录成功')\r\n            } else {\r\n              this.$message.error(res.msg)\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    // 用邮箱登录\r\n    changeLoginMethod() {\r\n      this.activenName = 'email'\r\n    },\r\n    sendEmailCode() {\r\n      // 发送邮箱验证码\r\n      this.$request.post(\"/email/\" + this.emailForm.email).then(res => {\r\n        if (res.code === '200') {\r\n          this.$message.success(\"发送成功\")\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  height: 100vh;\r\n  overflow: hidden;\r\n  background-image: url(\"@/assets/imgs/bg.jpg\");\r\n  background-size: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #666;\r\n}\r\na {\r\n  color: #2a60c9;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=de1579a2&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=de1579a2&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"de1579a2\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","_v","model","value","activeName","callback","$$v","expression","attrs","ref","usernameForm","usernameRules","username","$set","password","on","login","emailForm","emailRules","email","code","$event","sendEmailCode","staticRenderFns","name","data","required","message","trigger","pattern","created","methods","form","userForm","URL","$refs","validate","valid","$request","post","then","res","localStorage","setItem","JSON","stringify","$router","push","$message","success","error","msg","changeLoginMethod","activenName","component"],"sourceRoot":""}